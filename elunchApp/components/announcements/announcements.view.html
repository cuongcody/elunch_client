<section class="site-section site-section-light site-section-top themed-background-dark">
    <div class="container">
        <h1 class="animation-slideDown">
            <strong>Announcements</strong>
        </h1>
    </div>
</section>
<section class="site-content site-section">
    <div class="container text-center">
        <div ng-class="{ 'alert': flash, 'alert-success': flash.type === 'success', 'alert-danger': flash.type === 'error' }" ng-if="flash" ng-bind="flash.message"></div>
        <div class="row row-items" ng-repeat="announcement in vm.announcements" ng-if="$index % 3 == 0">
            <div class="col-sm-4">
                <a href="#/announcement/{{vm.announcements[$index].id}}" class="circle animation-fadeIn3600" data-toggle="animation-appear" data-animation-class="animation-fadeIn3600" data-element-offset="-100" >
                    <img class='img-thumbnail img-responsive img-circle' width="100" height="100" src="{{vm.announcements[$index].avatar_content_file}}" >
                </a>
                <h4 class="site-heading"><strong>{{vm.announcements[$index].title}}</strong></h4>
                <div class="meal-date text-center"><strong>Meal date:</strong> <i>{{vm.announcements[$index].meal_date | date:'yyyy-MMM-dd'}}</i></div>
                <p class="text-left remove-margin">{{vm.announcements[$index].content | limitTo : 300}}{{vm.announcements[$index].content.length > 300 ? '...' : ''}}</p>
                <span class="text-muted pull-right"><small><em>{{vm.formatDate(vm.announcements[$index].created_at)}}</em></small></span>
                <div class="unread-replies pull-left"><strong>Unread Replies:</strong> <span class="label label-warning">{{vm.announcements[$index].number_of_replies - vm.announcements[$index].number_of_have_read_replies}} / {{vm.announcements[$index].number_of_replies}}</span></div>
            </div>
            <div class="col-sm-4" ng-if="$index + 1 < vm.announcements.length">
                <a href="#/announcement/{{vm.announcements[$index + 1].id}}" class="circle animation-fadeIn3600" data-toggle="animation-appear" data-animation-class="animation-fadeIn3600" data-element-offset="-100" >
                    <img class='img-thumbnail img-responsive img-circle' width="100" height="100" src="{{vm.announcements[$index + 1].avatar_content_file}}" >
                </a>
                <h4 class="site-heading"><strong>{{vm.announcements[$index + 1].title}}</strong></h4>
                <div class="meal-date text-center"><strong>Meal date:</strong> <i>{{vm.announcements[$index + 1].meal_date | date:'yyyy-MMM-dd'}}</i></div>
                <p class="text-left remove-margin">{{vm.announcements[$index + 1].content | limitTo : 300}}{{vm.announcements[$index + 1].content.length > 300 ? '...' : ''}}</p>
                <span class="text-muted pull-right"><small><em>{{vm.formatDate(vm.announcements[$index + 1].created_at)}}</em></small></span>
                <div class="unread-replies pull-left"><strong>Unread Replies:</strong> <span class="label label-warning">{{vm.announcements[$index + 1].number_of_replies - vm.announcements[$index + 1].number_of_have_read_replies}} / {{vm.announcements[$index + 1].number_of_replies}}</span></div>
            </div>
            <div class="col-sm-4"  ng-if="$index + 2 < vm.announcements.length">
                <a href="#/announcement/{{vm.announcements[$index + 2].id}}" class="circle animation-fadeIn3600" data-toggle="animation-appear" data-animation-class="animation-fadeIn3600" data-element-offset="-100" >
                    <img class='img-thumbnail img-responsive img-circle' width="100" height="100" src="{{vm.announcements[$index + 2].avatar_content_file}}" >
                </a>
                <h4 class="site-heading"><strong>{{vm.announcements[$index + 2].title}}</strong></h4>
                <div class="meal-date text-center"><strong>Meal date:</strong> <i>{{vm.announcements[$index + 2].meal_date | date:'yyyy-MMM-dd'}}</i></div>
                <p class="text-left remove-margin">{{vm.announcements[$index + 2].content | limitTo : 300}}{{vm.announcements[$index + 2].content.length > 300 ? '...' : ''}}</p>
                <span class="text-muted pull-right"><small><em>{{vm.formatDate(vm.announcements[$index + 2].created_at)}}</em></small></span>
                <div class="unread-replies pull-left"><strong>Unread Replies:</strong> <span class="label label-warning">{{vm.announcements[$index + 2].number_of_replies - vm.announcements[$index + 2].number_of_have_read_replies}} / {{vm.announcements[$index + 2].number_of_replies}}</span></div>
            </div>
        </div>
        <div class="row">
            <button class="btn btn-success" ng-show='vm.is_more_announcements' ng-click='vm.loadAnnouncements(vm.date_get_more_announcements)'>Load 10 days later ...</button>
            <img ng-if="vm.dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
        </div>
    </div>
</section>
